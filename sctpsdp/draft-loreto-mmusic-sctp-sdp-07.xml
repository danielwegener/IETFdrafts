<?xml version="1.0"?>
<?rfc symrefs="yes"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?rfc toc="yes" ?>
<?rfc compact="yes" ?>
<?rfc sortrefs="no" ?>
<rfc category="std" docName="draft-loreto-mmusic-sctp-sdp-07" ipr="trust200811">

<?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>

<front>
    <title abbrev="The SCTP protocol identifier for SDP">
        Stream Control Transmission Protocol (SCTP)-Based Media
        Transport in the Session Description Protocol (SDP)
    </title>

    <author initials="S." surname="Loreto" fullname="Salvatore Loreto">
      <organization>Ericsson</organization>
      <address>
	<postal>
          <street>Hirsalantie 11</street>
	  <code>02420</code> 
	  <city>Jorvas</city> 
	  <country>Finland</country>
 	</postal>
	<email>Salvatore.Loreto@ericsson.com</email>
      </address>
    </author>

    <author initials="G." surname="Camarillo" fullname="Gonzalo Camarillo">
      <organization>Ericsson</organization>
      <address>
	<postal>
          <street>Hirsalantie 11</street>
	  <code>02420</code> 
	  <city>Jorvas</city> 
	  <country>Finland</country>
 	</postal>
	<email>Gonzalo.Camarillo@ericsson.com</email>
      </address>
    </author>

        <date year="2011"/>
        <area>RAI</area>
        <workgroup>MMUSIC</workgroup>
        <keyword>SCTP, SDP</keyword>


	<abstract>
	<t>
SCTP (Stream Control Transmission Protocol) is a transport protocol
used to establish associations between two endpoints. This document
describes how to express media transport over SCTP in SDP (Session
Description Protocol). This document defines the 'SCTP' and 'SCTP/DTLS' protocol
identifiers for SDP.
	</t>
        </abstract>
</front>


<middle>

<section title="Introduction">
<t>
SDP (Session Description Protocol) <xref target="RFC4566"/> provides a
general-purpose format for describing multimedia sessions in
announcements or invitations. RFC4145 <xref target="RFC4145"/>
specifies a general mechanism for describing and establishing TCP (Transmission Control Protocol)
streams. RFC 4572 <xref target="RFC4572"/> extends RFC4145 <xref
target="RFC4145"/> for describing TCP-based media streams that are
protected using TLS (Transport Layer Security) <xref target="RFC5246"/>.
</t>

<t>
This document defines a new protocol identifier, 'SCTP', to
describe SCTP-based <xref target="RFC4960"/> media
streams. Additionally, this document specifies the use of the 'setup'
and 'connection' SDP attributes to establish SCTP associations. These
attributes were defined in RFC4145 <xref target="RFC4145"/> for
TCP. This document discusses their use with SCTP.
</t>

<t>
Additionally this document defines a new protocol identifier, 'SCTP/DTLS', to
establish secure SCTP-based media streams over DTLS (Datagram Transport Layer Security) <xref target="RFC4347"/>,
as specified in <xref target="RFC6083"/>,
using SDP. The authentication certificates
are interpreted and validated as defined in RFC4572 <xref target="RFC4572"/>.
Self-signed certificates can be used securely, provided that the integrity
of the SDP description is assured as defined in RFC4572 <xref target="RFC4572"/>.
</t>

<t>TLS is designed to run on top of a byte-stream oriented transport protocol
providing a realible, in-sequence delivery like TCP.
Since no-one so far has implemented SCTP over TLS,
due to some serious limitations described in <xref target="RFC6083"/>,
this document does not make use of TLS over SCTP as described in RFC3436 <xref target="RFC3436"/>.
</t>




</section>


<section title="Terminology">
<t>
In this document, the key words "MUST", "MUST NOT", "REQUIRED",
"SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT
RECOMMENDED", "MAY", and "OPTIONAL" are to be interpreted as described
in BCP 14, <xref target="RFC2119">RFC 2119</xref> and indicate
requirement levels for compliant implementations.
</t>
</section>

<section title="Protocol Identifier">
<t>
The following is the format for an 'm' line, as specified in RFC4566
<xref target="RFC4566"/>:
</t>
<figure>
<artwork><![CDATA[
    m=<media> <port> <proto> <fmt> ...
]]></artwork>
</figure>
<t>
This document defines two new values for the 'proto' field: 'SCTP' and
'SCTP/DTLS'.
</t>
<t>
The 'SCTP' protocol identifier is similar to both the 'UDP' and 'TCP'
protocol identifiers in that it only describes the transport protocol
and not the upper-layer protocol. Media described using an 'm' line 
containing the 'SCTP' protocol identifier are carried using SCTP <xref target="RFC4960"/>.
</t>
<t>
The 'SCTP/DTLS' protocol identifier indicates that the media described 
will use the Datagram Transport Layer Security (DTLS) <xref target="RFC4347"/> over SCTP
as specified in <xref target="RFC6083"/>.
</t>
<t>
An 'm' line that specifies 'SCTP' or 'SCTP/DTLS'
MUST further qualify the application-layer protocol using an fmt
identifier.
</t>
<t>
An 'm' line that specifies 'SCTP/DTLS' MUST further provide a certificate fingerprint.
An SDP attribute (an 'a' line) is used to transport and exchange end point certificate.
The authentication certificates are interpreted and validated as defined in <xref target="RFC4572"/>.
</t>
</section>

<section title="The Setup and Connection Attributes and Association
		Management"
anchor="sec-attributes">
<t>
The use of the 'setup' and 'connection' attributes in the context of
an SCTP association is identical to the use of these attributes in the
context of a TCP connection. That is, SCTP endpoints MUST follow the
rules in Sections 4 and 5 of RFC 4145 <xref target="RFC4145"/> when it
comes to the use of the 'setup' and 'connection' attributes in
offer/answer <xref target="RFC3264"/> exchanges.
</t>
<t>
The management of an SCTP association is identical to the management
of a TCP connection. That is, SCTP endpoints MUST follow the rules in
Section 6 of RFC 4145 <xref target="RFC4145"/> to manage SCTP
associations. Whether to use the SCTP ordered or unordered delivery
service is up to the applications using the SCTP association.
</t>
</section>

<section title="Multihoming">
<t>
An SCTP endpoint, unlike a TCP endpoint, can be multihomed. An SCTP
endpoint is considered to be multihomed if it has more than one IP
address. A multihomed SCTP endpoint informs a remote SCTP endpoint
about all its IP addresses using the address parameters of the INIT or
the INIT-ACK chunk (depending on whether or not the multihomed
endpoint is the one initiating the establishment of the
association). Therefore, once the address provided in the 'c' line has
been used to establish the SCTP association (i.e., to send the INIT
chunk), address management is performed using SCTP. This means that
two SCTP endpoints can use addresses that were not listed in the 'c'
line but that were negotiated using SCTP mechanisms.
</t>
<t>
Some intermediaries performing firewall control use the addresses in
offer/answer exchanges to perform media authorization. That is, they
will not let media through unless it is sent to the address in the 'c'
line. </t>
<t>
The SCTP endpoints MAY choose to use the
main address all the time (e.g., they do not send retransmissions to
a backup address) and to send a re-INVITE every time they change that address.</t>
<t>
However not using non-primary paths for retransmission means not to utilize the 
multi-homing feature of SCTP for resilience. Therefore, the SCTP endpoints MAY 
use the 'candidate' SDP attribute to disclosure, to intermediaries performing 
firewall control, all its alternative IP addresses; this will avoid the need 
for the SCTP endpoints to send a re-INVITE every time they change the primary path.
</t>
</section>


<section title="Examples">
<t>
The following examples show the use of the 'setup' and 'connection'
SDP attributes. As discussed in <xref target="sec-attributes"/>, the
use of these attributes with an SCTP association is identical to their
use with a TCP connection. For the purpose of brevity, the main
portion of the session description is omitted in the examples, which
only show 'm' lines and their attributes (including 'c' lines).
</t>

<section title="Actpass/Passive" anchor="actpass-pass">
<t>   
An offerer at 192.0.2.2 signals its availability for an SCTP
association at SCTP port 54111. Additionally, this offerer is also
willing to initiate the SCTP association:
</t>
<figure anchor="exemple1.1" title="">
<artwork><![CDATA[
           m=image 54111 SCTP *
           c=IN IP4 192.0.2.2
           a=setup:actpass
           a=connection:new
]]></artwork></figure>
<t>
The endpoint at 192.0.2.1 responds with the following description:
</t>
<figure anchor="exemple1.2" title="">
<artwork><![CDATA[
           m=image 54321 SCTP *
           c=IN IP4 192.0.2.1
           a=setup:passive
           a=connection:new
]]></artwork></figure>
<t>
This will cause the offerer (at 192.0.2.2) to initiate an SCTP
association to port 54321 at 192.0.2.1.
</t>
</section>

<section title="Existing Connection Reuse" anchor="sec-reuse">
<t>
Subsequent to the exchange in <xref target="actpass-pass"/>, another
offer/answer exchange is initiated in the opposite direction.  The
endpoint at 192.0.2.1, which now acts as the offerer, wishes to
continue using the existing association:
</t>
<figure anchor="exemple2.1" title=""><artwork><![CDATA[
           m=application 54321 SCTP *
           c=IN IP4 192.0.2.1
           a=setup:passive
           a=connection:new
]]></artwork></figure>
<t>
The endpoint at 192.0.2.2 also wishes to use the existing SCTP
association and responds with the following description:
</t>
<figure anchor="exemple2.2" title=""><artwork><![CDATA[
           m=application 9 SCTP *
           c=IN IP4 192.0.2.2
           a=setup:active
           a=connection:new
]]></artwork></figure>
<t>
The existing SCTP association between 192.0.2.2 and 192.0.2.1 will be
reused. 
</t>
<!--
<t>
OPEN ISSUE: what happens when an SCTP endpoint stops using the IP
address it places in the c line needs to be explained in the
Multihoming Section, not in an example. The following paragraph should
be rephrased in accordance with the text we add there.

xxx: point to the open issue in the multihoming section.
</t>
<t>
xxx: clarify a bit more this paragraph.

Considering the SCTP multi-homing capabilities, it is worth to
underline that is not possible to reuse a media description putting a
different address in the c= field; in fact according to <xref
target="RFC3264"/> (in section 8.3.1) to modify an Address, Port or
Transport, the offerer have to create a new media description. So if
an SCTP association changes its active address and then needs to
modify the address updating the c= line, the offere have to create a
new media description.
</t>
-->
</section>

<section title="SDP description for DTLS Connection" anchor="tls-conn">
<t>   
An offerer at 192.0.2.2 signals the availability of a T.38 fax session
over SCTP/DTLS.
</t>
<figure anchor="exemple3.1" title="">
<artwork><![CDATA[
           m=image 54111 SCTP/DTLS t38
           c=IN IP4 192.0.2.2
           a=setup:actpass
           a=connection:new
           a=fingerprint:SHA-1 \
             4A:AD:B9:B1:3F:82:18:3B:54:02:12:DF:3E:5D:49:6B:19:E5:7C:AB
]]></artwork>
</figure>

</section>

</section>

<section title="Network Address Translators (NAT) Considerations">
<t>SCTP specific features (not present in UDP/TCP), as the checksum (CRC32c) value calculated on the whole packet (not just the header) or
multihoming, present new challenges for a NAT. <xref target="I-D.ietf-behave-sctpnat"/> describes an SCTP specific variant of NAT which
 provides similar features of Network Address and Port Translation (NAPT).</t>

<t>As an alternative to design SCTP specific NAT,
SCTP-over-UDP <xref target="I-D.tuexen-sctp-udp-encaps"/> makes possible,
encapsulating SCTP packets into UDP packets, to use SCTP in networks with legacy NAT and firewalls not supporting SCTP.</t>

<t>OPEN ISSUE:  do we want to include in SDP the ability to signal SCTP-over-UDP ?</t>

<t>TBD: How to use Interactive Connectivity Establishment (ICE) to establish SCTP streams.</t>

<t>OPENT ISSUE: Do we want ICE to only use SCTP over IP candidates, or we ant ICE to use SCTP over UDP candidates as well?</t>

</section>
  	
<section title="Security Considerations">
<t>
See RFC 4566 <xref target="RFC4566"/> for security considerations on
the use of SDP in general. See RFC 3264 <xref target="RFC3264"/>,
RFC 4145 <xref target="RFC4145"/> and RFC 4572 <xref target="RFC4572"/> 
for security considerations on establishing media streams using 
offer/answer exchanges. See RFC 4960 <xref target="RFC4960"/> 
for security considerations on SCTP in general and <xref target="RFC6083"/>
for security consideration using DTLS on top of SCTP.
This specification does not introduce any new security
consideration in addition to the ones discussed in those
specifications.
</t>
</section>


<section title="IANA Considerations">
<t>
This document defines two new proto values: 'SCTP' and 'SCTP/DTLS'. Their formats are defined
in Section 3.  These proto values should be registered by the IANA under
"Session Description Protocol (SDP) Parameters" under "proto".
</t>
<t>
The SDP specification, <xref target="RFC4566"/>, states that
specifications defining new proto values, like the SCTP and SCTP/DTLS proto values
defined in this RFC, must define the rules by which their media format
(fmt) namespace is managed.  For the SCTP protocol, new formats SHOULD
have an associated MIME registration. Use of an existing MIME subtype
for the format is encouraged.  If no MIME subtype exists, it is
RECOMMENDED that a suitable one is registered through the IETF process
<xref target="RFC4288"/> <xref target="RFC4289"/> by production of, or reference to, a
standards-track RFC that defines the transport protocol for the
format.
</t>
</section>


</middle>


<back>

	<references title="Normative References">

		<?rfc include="reference.RFC.2119"?>
		<?rfc include="reference.RFC.3264"?>
		<?rfc include="reference.RFC.3436"?>
		<?rfc include="reference.RFC.4145"?>
		<?rfc include="reference.RFC.4288"?>
		<?rfc include="reference.RFC.4289"?>
		<?rfc include="reference.RFC.4347"?>
		<?rfc include="reference.RFC.4566"?>
		<?rfc include="reference.RFC.4572"?>
		<?rfc include="reference.RFC.4960"?> 
		<?rfc include="reference.RFC.5246"?>
                <?rfc include="reference.RFC.6083"?>
     <?rfc include="reference.I-D.draft-ietf-behave-sctpnat-04"?>
     <?rfc include="reference.I-D.draft-tuexen-sctp-udp-encaps-06"?>
	</references>


</back>


</rfc>
